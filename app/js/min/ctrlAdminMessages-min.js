app.controller("AddMessageCtrl",["fsConfig","$scope","currentUser","$firebase","$routeParams","$location","filterFilter","DataSource","Profile","FsNotifyWithId",function(e,o,s,t,a,l,n,i,c,g){"use strict";o.isLoading=!1,o.messageAuthor="";var r=new Firebase(e.FIREBASE_URL);if(s){var d=new Firebase(e.FIREBASE_URL+"/users/").child(s.uid);d.once("value",function(e){var s=e.val();o.profile=s,console.log(s.name);var t=s.name;o.messageAuthor=t,console.log(s)})}var m=r.child("system/usermessages");o.updateMessages=function(){var t="system",a,n=(new Date).valueOf();if(a=o.message.link?o.message.link:"",o.message.content)var i=m.push({title:o.message.title,authorName:o.messageAuthor,authorId:s.uid,messageType:t,messageLink:a,timestamp:n,messageContent:o.message.content},function(){var t=i.key();console.log("new post id is: "+t),e.DEV_STATUS===!0?(console.log("DEV STAUS: "+e.DEV_STATUS),console.log("IT WOULD POST MESSAGE HERE")):g.systemMessage(s.uid,t),l.path("/home").replace(),o.$apply()})}}]),app.controller("UserMessageCtrl",["fsConfig","$scope","currentUser","$firebaseArray","$routeParams","$location","filterFilter","DataSource","Profile","FsNotify",function(e,o,s,t,a,l,n,i,c,g){"use strict";o.isLoading=!1,o.isSent=!1,o.messageAuthor="",o.recipientid=a.userid;var r,d=new Firebase(e.FIREBASE_URL);o.notificationTypes=[{id:"bookAdd",title:"bookAdd",textContent:"A new book was added!",textContent1:" was added by ",textContent2:", set in "},{id:"bookSuggest",title:"bookSuggest",textContent:"A book was suggested.",textContent1:" was suggested by ",textContent2:", set in "},{id:"locationFollow",title:"locationFollow",textContent:"A location was followed.",textContent1:" was followed by "},{id:"collectionFollow",title:"collectionFollow",textContent:"A collection was followed",textContent1:" was followed by "}];var m=t(d.child("places")),u=t(d.child("users")),h=t(d.child("Books")),S=t(d.child("collections"));if(o.theLocations=m,o.theUsers=u,o.theBooks=h,o.theCollections=S,console.log(h),console.log(m),s){var f=new Firebase(e.FIREBASE_URL+"/users/").child(s.uid);f.once("value",function(e){var s=e.val();o.profile=s,console.log(s.name);var t=s.name;o.messageAuthor=t,console.log(s)})}var A=d.child("messages");o.addNotification=function(){var s="System";o.messageType.id&&(s=o.messageType.id),console.log("the message type is "+s);var t=o.message.theBook.$id,a,l;switch(o.message.theLocation&&(a=o.message.theLocation.geonameId,l=o.message.theLocation.name),r="http://fictionset.in/#/book/"+t,s){case"bookAdd":console.log("switch add book"),e.DEV_STATUS===!0&&(console.log("DEV STAUS: "+e.DEV_STATUS),console.log("IT WOULD NOTIFY A BOOK HERE"));break;case"bookSuggest":console.log("switch suggest book"),e.DEV_STATUS===!0?(console.log("DEV STAUS: "+e.DEV_STATUS),console.log("IT WOULD NOTIFY A SUGGESTION HERE")):console.log(g.bookSuggested(o.message.theUser,o.message.theBook));break;case"locationFollow":alert("switch location follow");break;case"collectionFollow":alert("switch collection");break;default:console.log("There should not be a default failover at this thing.")}r=o.message.link?o.message.link:o.message.bookid?"http://fictionset.in/book/"+t:""},o.updateMessages=function(){var t="System",a=(new Date).valueOf();r=o.message.link?o.message.link:"",o.message.content&&(e.DEV_STATUS===!0?(console.log("DEV STAUS: "+e.DEV_STATUS),console.log("IT WOULD MESSAGE HERE")):A.push({title:o.message.title,authorName:o.messageAuthor,authorId:s.uid,messageType:t,messageLink:r,timestamp:a,messageContent:o.message.content},function(e){console.log(e),l.path("/account").replace(),o.$apply()}))}}]);
//# sourceMappingURL=./ctrlAdminMessages-min.js.map