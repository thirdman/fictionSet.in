app.controller("ManagePlacesCtrl",["fsConfig","$scope","currentUser","$firebaseArray",function(e,o,a,r){"use strict";var l=null,n=r(new Firebase(e.FIREBASE_URL+"/places/"));n.$loaded().then(function(){o.placelist=n,l=n}),o.placelist=l}]),app.controller("ManageUsersCtrl",["fsConfig","$scope","currentUser","$firebaseArray","ngDialog",function(e,o,a,r,l){var n=r(new Firebase(e.FIREBASE_URL+"/users/"));n.$loaded().then(function(){console.log(n),angular.forEach(n,function(e){if(e.collections){var o=0;angular.forEach(e.collections,function(){o++}),console.log("the collection count is:"+o)}}),o.usersList=n}),o.manageBadges=function(a){o.theUserId=a;var n=r(new Firebase(e.FIREBASE_URL+"/badges/"));n.$loaded().then(function(){o.allBadges=n,console.log(n)}),l.open({plain:!1,template:"views/dialogs/dialogBadges.html",scope:o})},o.addBadge=function(o,a){if(o){var r=new Firebase(e.FIREBASE_URL+"/users/").child(o),l=new Firebase(e.FIREBASE_URL+"/badges/").child(a);l.once("value",function(e){var o=e.val();r.child("badges").child(a).update(o)})}}}]),app.controller("EditPlaceCtrl",["fsConfig","$scope","currentUser","$firebaseArray","$firebaseObject","$routeParams",function(e,o,a,r,l,n){"use strict";var s=n.place,c=n.placeid;o.placename=s,o.placeid=c;var t=new Firebase(e.FIREBASE_URL+"/places/").child(c);t.setPriority(1e3);var i=l(t);i.$loaded().then(function(){o.place=i,o.hasData=!0}),o.place=i;var u=t.child("images");o.addUrl=function(){o.isLooking=!0,o.urlString&&u.push({src:o.urlString,source:o.urlSource,sourceUrl:o.urlSourceUrl,author:o.urlAuthor,authorUrl:o.urlAuthorUrl,addedById:a.uid,addedByName:a.displayName}),o.urlString="",o.urlSource="",o.urlSourceUrl="",o.urlAuthor="",o.urlAuthorUrl="",o.isLooking=!1}}]),app.controller("ManagePlaceCtrl",["fsConfig","$scope","currentUser","$firebaseArray","$routeParams","$location","filterFilter","DataSource",function(e,o,a,r,l,n,s,c){var t=l.place,i=l.placeid;o.placename=t,o.placeid=i,console.log(t);var u=new Firebase(e.FIREBASE_URL+"/places/").child(i);u.setPriority(1e3);var g=r(u),d=g.$asObject();d.$loaded().then(function(){o.place=d,o.hasData=!0,console.log("yep");var e="http://api.geonames.org/searchJSON?q="+o.place.displayName+"&lang=en&style=short&maxRows=1&type=json&username=thirdman",a=function(e){o.dataSet=e,console.log(e),e.geonames.length&&(o.hasData=!0),o.geoplace=e.geonames[0]};c.get(e,a)}),o.place=d,console.log(o.geoplace),console.log(o.place),o.geosubmit=function(){o.geoplace.name&&u.update({displayName:o.geoplace.name,geonameId:o.geoplace.geonameId,countryCode:o.geoplace.countryCode,gps:{lat:o.geoplace.lat,lng:o.geoplace.lng}})}}]),app.controller("EditBookCtrl",["fsConfig","$scope","currentUser","$firebaseArray","$firebaseObject","$routeParams",function(e,o,a,r,l,n){var s=n.id;o.newSetting=null,console.log(n.id);var c=new Firebase(e.FIREBASE_URL+"/Books/"+s);o.bookobj=l(c),o.book=l(c),console.log(o.book),o.autoObject=function(a){console.log(a);var r=a.originalObject,l=new Firebase(e.FIREBASE_URL+"/Books/"+s+"/places/"),n=new Firebase(e.FIREBASE_URL+"/places/");l.child(r.geonameId).set(r),n.child(r.geonameId).set(r),o.newSetting=r};var t=r(new Firebase(e.FIREBASE_URL+"/Books/"+s+"/tags/"));console.log(t),o.bookLocations=t,o.removePlace=function(a){console.log(a);var l=new Firebase(e.FIREBASE_URL+"/Books/").child(s).child("/places/");o.removeItemList=r(l),console.log(l),console.log(o.removeItemList),o.removeItemList.$remove(a.geonameId),o.isFollowing=!1},o.removePriority=function(){c.setPriority(null)},o.setPriority=function(){c.setPriority(1e3)}}]);
//# sourceMappingURL=./ctrlAdmin-min.js.map