{"version":3,"file":"services-min.js","sources":["../services.js"],"names":["extend","base","parts","Array","prototype","slice","call","arguments","forEach","p","k","hasOwnProperty","angular","module","service","fsConfig","$http","$firebase","$firebaseObject","ref","Firebase","FIREBASE_URL","getBook","theBookId","refBook","child","getUser","theUserId","refProfile","getSuggested","refSuggested","getMessage","theMessageId","refMessage","getBook1","refBooks","getUser1","refUser","console","log","getRole","userRole","addBookView","$loaded","then","viewCountRef","viewCount","$save","FsNotify","FsGet","bookAdded","theUser","theBook","on","bk","val","user","$id","bookSuggested","systemMessage","theMessage","message","$firebaseArray","filterFilter","refLocations","refUsers","refCollections","refMessages","adminLocation","getData","goAhead","theTimestamp","Date","valueOf","messageType","messageTitle","messageContent","title","activatorId","push","displayName","messageLink","activatorName","timestamp","sentCountryId","places","thePlace","isCountry","sentCountryNotification","name","thisLocationId","geonameId","thisCountryId","parseFloat","countryId","bookUserSetCountry","following","length","thisfollowingid","recipientId","userId","bookId","bookTitle","coverurl","locationId","locationName","countryName","followsId","followsName","error","bookUserSet","authorName","authorId","factory","$resource","$q","photosPublic","format","jsoncallback","load","method","search","query","q","defer","tags","resp","resolve","err","reject","promise","getplaceurl","getPlace","loc","get","response","data","getpicsurl","bbox","is_getty","getPics","locid","file","callback","transform","success","status"],"mappings":"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"}