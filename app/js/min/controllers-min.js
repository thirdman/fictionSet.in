"use strict";angular.module("myApp.controllers",[]).controller("HomeCtrl",["$scope","syncData",function(e,n){n("syncedValue").$bind(e,"syncedValue")}]).controller("ChatCtrl",["$scope","syncData",function(e,n){e.newMessage=null,e.messages=n("messages",10),e.addMessage=function(){e.newMessage&&(e.messages.$add({text:e.newMessage}),e.newMessage=null)}}]).controller("LoginCtrl",["$scope","loginService","$location",function(e,n,s){function l(){return e.email?e.pass?e.pass!==e.confirm&&(e.err="Passwords do not match"):e.err="Please enter a password":e.err="Please enter an email address",!e.err}e.email=null,e.pass=null,e.confirm=null,e.createMode=!1,e.login=function(s){e.err=null,e.email?e.pass?n.login(e.email,e.pass,function(n,l){e.err=n?n+"":null,n||s&&s(l),console.log(l)}):e.err="Please enter a password":e.err="Please enter an email address"},e.createAccount=function(){e.err=null,l()&&n.createAccount(e.email,e.pass,function(l,a){l?e.err=l?l+"":null:e.login(function(){n.createProfile(a.uid,a.email),s.path("/account")})})}}]).controller("AccountCtrl",["$scope","loginService","changeEmailService","firebaseRef","syncData","$location","FBURL",function(e,n,s,l,a,r,o){function c(){return{email:e.auth.user.email,oldpass:e.oldpass,newpass:e.newpass,confirm:e.confirm,callback:function(n){n?e.err=n:(e.oldpass=null,e.newpass=null,e.confirm=null,e.msg="Password updated!")}}}function u(){return{newEmail:e.newemail,pass:e.pass,callback:function(n){n?(e.emailerr=n,e.syncAccount()):(e.syncAccount(),e.newemail=null,e.pass=null,e.emailmsg="Email updated!")}}}e.syncAccount=function(){e.user={},a(["users",e.auth.user.uid]).$bind(e,"user").then(function(n){e.unBindAccount=n})},e.syncAccount(),e.logout=function(){n.logout()},e.oldpass=null,e.newpass=null,e.confirm=null,e.reset=function(){e.err=null,e.msg=null,e.emailerr=null,e.emailmsg=null},e.updatePassword=function(){e.reset(),n.changePassword(c())},e.updateEmail=function(){e.reset(),e.unBindAccount(),s(u())}}]);